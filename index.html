<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gestor Financeiro - Login</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="container auth-container">
    <h1>Gestor Financeiro</h1>
    <p class="subtitle">Controle simples e inteligente das suas finanças.</p>

    <section class="card">
      <h2>Entrar</h2>
      <form id="login-form">
        <label for="login-email">E-mail</label>
        <input type="email" id="login-email" placeholder="seuemail@exemplo.com" required />

        <label for="login-password">Senha</label>
        <input type="password" id="login-password" placeholder="Sua senha" required />

        <button type="submit">Entrar</button>
      </form>
    </section>

    <section class="card">
      <h2>Criar conta</h2>
      <form id="signup-form">
        <label for="signup-name">Nome</label>
        <input type="text" id="signup-name" placeholder="Seu nome" required />

        <label for="signup-email">E-mail</label>
        <input type="email" id="signup-email" placeholder="seuemail@exemplo.com" required />

        <label for="signup-password">Senha</label>
        <input
          type="password"
          id="signup-password"
          placeholder="Mínimo 6 caracteres"
          minlength="6"
          required
        />

        <button type="submit">Criar conta</button>
      </form>
    </section>

    <p id="status"></p>
    <small class="beta-note">
      Versão Beta local – seus dados ficam salvos apenas neste navegador.
    </small>

    <footer class="auth-footer">
      <a href="Termos_de_Uso.txt" target="_blank">Termos de Uso</a> ·
      <a href="Politica_de_Privacidade.txt" target="_blank">Política de Privacidade</a>
    </footer>
  </main>

  <script>
    const USER_KEY = "gf_user";
    const LOGGED_KEY = "gf_logged";

    const statusEl = document.getElementById("status");
    const loginForm = document.getElementById("login-form");
    const signupForm = document.getElementById("signup-form");

    function showStatus(msg, isError = false) {
      statusEl.textContent = msg;
      statusEl.style.color = isError ? "red" : "green";
    }

    const alreadyLogged = localStorage.getItem(LOGGED_KEY) === "true";
    if (alreadyLogged) {
      window.location.href = "dashboard.html";
    }

    signupForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const nome = document.getElementById("signup-name").value.trim();
      const email = document.getElementById("signup-email").value.trim();
      const password = document.getElementById("signup-password").value;

      if (password.length < 6) {
        showStatus("A senha deve ter pelo menos 6 caracteres.", true);
        return;
      }

      const user = { nome, email, password };
      localStorage.setItem(USER_KEY, JSON.stringify(user));

      showStatus("Conta criada com sucesso! Agora faça login.", false);
      signupForm.reset();
    });

    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const email = document.getElementById("login-email").value.trim();
      const password = document.getElementById("login-password").value;

      const stored = localStorage.getItem(USER_KEY);
      if (!stored) {
        showStatus("Nenhum usuário cadastrado ainda. Crie uma conta primeiro.", true);
        return;
      }

      const user = JSON.parse(stored);

      if (user.email === email && user.password === password) {
        localStorage.setItem(LOGGED_KEY, "true");
        showStatus("Login realizado! Redirecionando...", false);
        window.location.href = "dashboard.html";
      } else {
        showStatus("E-mail ou senha incorretos.", true);
      }
    });
  </script>
</body>
</html>
